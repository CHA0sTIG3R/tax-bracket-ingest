# Dockerfile.lambda
FROM public.ecr.aws/lambda/python:3.11 AS base

# Copy dependency manifests and install runtime deps
COPY requirements.txt setup.py ./
RUN pip install --no-cache-dir --prefer-binary -r requirements.txt

# Install the package into the image
COPY tax_bracket_ingest ./tax_bracket_ingest
RUN pip install --no-cache-dir --prefer-binary .

# Lambda handler entrypoint
COPY lambda_handler.py ./

CMD [ "lambda_handler.handler" ]
